
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Experiment</title>

    <!-- Bootstrap core CSS -->
    <link href="../lib/css/bootstrap.min.css" rel="stylesheet">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <style>
      p {
      margin-bottom:1.5em;
      font-size: 18px;
      }
      li {
      margin-bottom:1.5em;
      font-size: 18px;
      }
    </style>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body role="document">
    
    <div class="container theme-showcase" role="main">

      </br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100" style="width: 5%;"><span class="sr-only">5% Complete</span></div>
      </div>

      <div class="page-header">
        <h1>Instructions</h1>
      </div>
      
      <div class="well" style="width:800px; margin: 0 auto">
	
	<h2>
	  <center>Guess my photo!</center>
	</h2>
	
	<p>
	  In this HIT you will play a communication game. You will be
	  matched with a robot who will try to adapt to how you talk!
	  On each round of this game, you are going to be shown a set
	  of four regular photos like this:
	</p>

	<p>
	  <center><img src="images/stimuli.png" alt="Example gameplay" style="width:600px;height:175px"></center>
	</p>

	<p> You will play the <b> Speaker </b> role and your partner
	  will play the <b> Listener</b> role. You will
	  see the same photos as your partner <b> but they will be
	  scrambled in different orders on your screens</b>. On each
	  round, you will be shown a blue box marking one of the
	  photos as the "target". Only you, the Speaker, can see which
	  photo is the target.
 	</p> 

	<p>
	  <center><img src="images/highlight.png" alt="Example gameplay" style="width:600px;height:179px"></center>
	</p>
	
	<p>
	  As the Speaker, your goal is to tell the Listener which one
	  of the photos is the target by typing and sending a message
	  through a chatbox. You can write whatever description you
	  think will be useful for your partner to identify the target
	  (this isn't a game of "Taboo"!)
	</p>

	<p>
	  <center><img src="images/typing.png" alt="Example gameplay" style="width:600px;height:268px"></center>
	</p>
	
	<p>
	  The Listener will read your message and try to decide which
	  photo they believe you are describing. The Listener will not
	  be able to send messages back to you, but you will see which
	  photo they selected, and they will see the true target you
	  were trying to describe. The task is challenging, so they
	  may get confused at first, but they will use this feedback
	  to learn to be understand you better on future rounds.
	</p>

	<p>
	  <center><img src="images/listener_click.png" alt="Example gameplay"
		       style="width:600px;height:340px"></center>
	</p>

	<p>
	  In order to keep track of how well you've been doing, you
	  and your partner will earn <b>2 points for each correct
	  response</b>!  Try to earn as many points as you can!
	</p>
	
	<p>
	  There are a total of <b>24 rounds</b> with the same four
	  photos, so you will describe each photo <b>multiple times</b>! After
	  the final round you will fill out a quick 15 second survey
	  and be on your way. 
	</p>

	<!-- <p> -->
	<!--   A few final notes: First, since you are playing with another -->
	<!--   turker, you may see this screen before the game begins: -->
	<!-- <p> -->
	<!--   <center> -->
	<!--     <img src="images/waitScreen.png" alt="initial matcher's board" -->
	<!-- 	 style="width:700px;height:150px"> -->
	<!--   </center> -->
	<!-- </p> -->
	<!-- <p> -->
	<!--   Just hold tight. Another turker should join the game within -->
	<!--   the next few minutes. If you're in the waiting room 5 -->
	<!--   minutes without another player joining, we recommend -->
	<!--   returning the HIT and trying again later. -->
	<!-- </p> -->
	
	<!-- <p> -->
	<!--   Second, please be respectful of the turker you're playing -->
	<!--   with: do not send inappropriate or non-game-related material -->
	<!--   through the chat box, and try to be as responsive as -->
	<!--   possible. -->
	<!-- </p> -->

	<p>
	  As a final note, please DO NOT refresh the page at any point
	  once you start the game (including the waiting page). If you
	  refresh, you will not be able to rejoin the game you were in
	  and you may not be able to submit the HIT. If you do not see
	  four photos in a row, or if they look weird or overlapping
	  at all, try rescaling your browser window!
	</p>

	<h4>
	  Please fill out this short quiz below before getting started.
	  Good luck and have fun! 
	</h4>
	
      </div>
      <div class="page-header">
        <h3>Comprehension Quiz</h3>
      </div>

     <div class="well" style="width:800px; margin: 0 auto">
 
  </br>
  The <b>Speaker</b> can click on a photo to end the round
    </br>
    <input type="radio" name="dgoal" value="no"> True 
    </br>
    <input type="radio" name="dgoal" value="yes"> False
    </br>

  </br>
  The Listener wants to select the target that the Speaker is describing, and avoid selecting the other photos.
      </br>
      <input type="radio" name="mgoal" value="yes"> True
      </br>
      <input type="radio" name="mgoal" value="no"> False
      </br>
    

  </br> 
  The target photo is marked for the Speaker with a blue box
      </br>
      <input type="radio" name="round" value="yes"> True
      </br>
      <input type="radio" name="round" value="no"> False
      </br>

  </br> 
  Only the Speaker can send messages 
      </br>
      <input type="radio" name="message" value="yes"> True
      </br>
      <input type="radio" name="message" value="no"> False
      </br>

  </br> 
  At the end of each round
       </br>
       <input type="radio" name="comp" value="no"> All photos stay in the same locations
       </br>
       <input type="radio" name="comp" value="yes"> The photos are shuffled
       </br>
       
  </br>
  The order of the photos is the same for the director and the matcher
        </br>
        <input type="radio" name="completed" value="no"> True
        </br>
        <input type="radio" name="completed" value="yes"> False
        </br>

  </br>
    <input id="quiz_submit" type="submit" value="Submit"> 
      </br>
      </br>
  <div class="error" style="display:none"> Ooops! Looks like you made a mistake. You have one more try. </div>
    </div> <!-- /container -->
      </div>
    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
	var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);
      
      console.log(urlParams)

      var counter = 0;
      document.getElementById("quiz_submit").onclick = function () {
        var ans1 = $('input[name="dgoal"]:checked').val();
        var ans2 = $('input[name="mgoal"]:checked').val();
        var ans3 = $('input[name="round"]:checked').val();
        var ans4 = $('input[name="message"]:checked').val();
        var ans5 = $('input[name="comp"]:checked').val();
        var ans6 = $('input[name="completed"]:checked').val();

        if(ans1 == "yes" && ans2 == "yes" && ans3 == "yes" && 
           ans4 == "yes" && ans5 == "yes" && ans6 == "yes") {
           var workerId = urlParams.workerId;
           var assignmentId = urlParams.assignmentId;
           var hitId = urlParams.hitId;
           var turkSubmitTo = urlParams.turkSubmitTo;
           location.replace("./pass.html?workerId=" + workerId
                            + "&assignmentId=" + assignmentId
                            + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo);
        } else if(counter == 3) {
          location.replace("./fail.html");
        } else {
          $('.error').show()
          counter += 1;
        }
      };
    </script>
    

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="../lib/js/bootstrap.min.js"></script>
  </body>
</html>
